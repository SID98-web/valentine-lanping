<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>A Question For You... ‚ù§Ô∏è</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    touch-action: manipulation;
  }

  body {
    background: linear-gradient(135deg, #1a0011 0%, #0d0000 40%, #1a0011 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Quicksand', sans-serif;
    position: relative;
  }

  /* ============ FLOATING HEARTS BACKGROUND ============ */
  .bg-hearts {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }
  .bg-heart {
    position: absolute;
    opacity: 0;
    animation: floatHeart linear infinite;
  }
  @keyframes floatHeart {
    0%   { opacity: 0; transform: translateY(105vh) rotate(0deg) scale(0.5); }
    10%  { opacity: 0.6; }
    90%  { opacity: 0.6; }
    100% { opacity: 0; transform: translateY(-5vh) rotate(360deg) scale(1); }
  }

  /* ============ QUESTION SCREEN ============ */
  .question-screen {
    position: relative;
    z-index: 10;
    text-align: center;
    animation: fadeIn 1s ease-out;
    padding: 20px;
    width: 100%;
    max-width: 500px;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .bear-gif {
    width: 160px;
    height: 160px;
    margin: 0 auto 16px;
    border-radius: 20px;
  }
  .bear-gif img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 20px;
  }

  .question-text {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2rem, 7vw, 3.2rem);
    color: #fff;
    text-shadow: 0 0 30px rgba(255, 60, 90, 0.6), 0 2px 10px rgba(0,0,0,0.5);
    margin-bottom: 6px;
    line-height: 1.3;
  }
  .question-name {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.4rem, 5vw, 2rem);
    color: #ff6b8a;
    text-shadow: 0 0 20px rgba(255, 107, 138, 0.5);
    margin-bottom: 35px;
  }

  .buttons-area {
    position: relative;
    min-height: 70px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .btn-yes {
    padding: 16px 48px;
    font-size: clamp(1.2rem, 4vw, 1.5rem);
    font-family: 'Quicksand', sans-serif;
    font-weight: 700;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    background: linear-gradient(135deg, #ff4d6d, #ff2a52);
    color: white;
    box-shadow: 0 4px 25px rgba(255, 45, 85, 0.5), 0 0 60px rgba(255, 45, 85, 0.2);
    transition: all 0.3s ease;
    position: relative;
    z-index: 20;
    -webkit-appearance: none;
  }
  .btn-yes:active {
    transform: scale(1.08);
    box-shadow: 0 6px 35px rgba(255, 45, 85, 0.7), 0 0 80px rgba(255, 45, 85, 0.3);
  }

  .btn-no {
    padding: 14px 36px;
    font-size: clamp(1rem, 3.5vw, 1.2rem);
    font-family: 'Quicksand', sans-serif;
    font-weight: 600;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50px;
    cursor: pointer;
    background: rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.7);
    transition: all 0.2s ease;
    position: fixed;
    z-index: 20;
    user-select: none;
    -webkit-appearance: none;
    /* Start below the Yes button */
    left: 50%;
    transform: translateX(-50%);
  }

  .no-count-msg {
    color: rgba(255, 150, 170, 0.9);
    font-size: clamp(0.85rem, 3vw, 1rem);
    margin-top: 20px;
    min-height: 28px;
    transition: opacity 0.3s;
    padding: 0 10px;
  }

  /* ============ CELEBRATION SCREEN ============ */
  .celebration-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 100;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: #0a0a0a;
  }
  .celebration-screen.active {
    display: flex;
    animation: fadeIn 0.5s ease-out;
  }

  .celebration-screen canvas {
    position: fixed;
    top: 0; left: 0;
    z-index: 1;
  }

  .celebration-content {
    position: relative;
    z-index: 10;
    text-align: center;
    pointer-events: none;
    padding: 20px;
  }
  .celeb-emoji {
    font-size: clamp(3rem, 10vw, 4.5rem);
    margin-bottom: 10px;
    animation: bounceIn 0.6s ease-out 0.5s both;
  }
  .celeb-title {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2.5rem, 9vw, 4rem);
    color: #fff;
    text-shadow: 0 0 30px rgba(255, 60, 90, 0.8), 0 0 60px rgba(255, 60, 90, 0.4);
    animation: bounceIn 0.6s ease-out 0.8s both;
  }
  .celeb-subtitle {
    font-size: clamp(1rem, 3.5vw, 1.3rem);
    color: rgba(255, 180, 200, 0.9);
    margin-top: 12px;
    letter-spacing: 4px;
    text-transform: uppercase;
    animation: bounceIn 0.6s ease-out 1.1s both;
  }
  .celeb-name {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2rem, 7vw, 2.8rem);
    color: #ff6b8a;
    margin-top: 8px;
    text-shadow: 0 0 20px rgba(255, 107, 138, 0.6);
    animation: bounceIn 0.6s ease-out 1.4s both;
  }
  @keyframes bounceIn {
    0%   { opacity: 0; transform: scale(0.3) translateY(20px); }
    50%  { opacity: 1; transform: scale(1.05); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
  }

  /* Confetti */
  .confetti-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 50;
    overflow: hidden;
  }
  .confetti-piece {
    position: absolute;
    top: -20px;
    animation: confettiFall linear forwards;
  }
  @keyframes confettiFall {
    0%   { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
    100% { opacity: 0; transform: translateY(105vh) rotate(720deg) scale(0.5); }
  }
</style>
</head>
<body>

<!-- ============ FLOATING HEARTS BACKGROUND ============ -->
<div class="bg-hearts" id="bgHearts"></div>

<!-- ============ QUESTION SCREEN ============ -->
<div class="question-screen" id="questionScreen">
  <div class="bear-gif">
    <img src="https://media1.tenor.com/m/bfWMVoNsii4AAAAC/cute-love.gif" alt="cute bear" crossorigin="anonymous"
      onerror="this.parentElement.innerHTML='<div style=&quot;font-size:100px;line-height:160px;&quot;>üß∏üíï</div>'">
  </div>

  <div class="question-text">Will you be my</div>
  <div class="question-text" style="margin-bottom: 5px;">Valentine?</div>
  <div class="question-name">‚Äî Lanping ‚Äî</div>

  <div class="buttons-area" id="buttonsArea">
    <button class="btn-yes" id="btnYes">Yes! ‚ù§Ô∏è</button>
  </div>
  <button class="btn-no" id="btnNo">No üòÖ</button>

  <div class="no-count-msg" id="noMsg"></div>
</div>

<!-- ============ CELEBRATION SCREEN ============ -->
<div class="celebration-screen" id="celebScreen">
  <canvas id="heartCanvas"></canvas>
  <div class="confetti-container" id="confettiContainer"></div>
  <div class="celebration-content">
    <div class="celeb-emoji">ü•∞</div>
    <div class="celeb-title">Yayyy!</div>
    <div class="celeb-subtitle">Happy Valentine's Day</div>
    <div class="celeb-name">Lanping ‚ù§Ô∏è</div>
  </div>
</div>

<script>
// =====================================================
// CONFIG
// =====================================================
const NAME = "Lanping";

// ============ DETECT MOBILE ============
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

// ============ FLOATING BACKGROUND HEARTS ============
(function() {
  const container = document.getElementById('bgHearts');
  const hearts = ['‚ù§', 'üíï', 'üíó', '‚ô•', 'üíñ', 'üíò'];
  const count = isMobile ? 18 : 30;
  for (let i = 0; i < count; i++) {
    const el = document.createElement('div');
    el.className = 'bg-heart';
    el.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    el.style.left = Math.random() * 100 + '%';
    el.style.fontSize = (12 + Math.random() * 18) + 'px';
    el.style.animationDuration = (7 + Math.random() * 10) + 's';
    el.style.animationDelay = (Math.random() * 12) + 's';
    container.appendChild(el);
  }
})();

// ============ RUNAWAY "NO" BUTTON ============
const btnNo = document.getElementById('btnNo');
const btnYes = document.getElementById('btnYes');
const noMsg = document.getElementById('noMsg');

let noAttempts = 0;
const noMessages = [
  "Are you sure? ü•∫",
  "Really?? Think again... üò¢",
  "You're breaking my heart! üíî",
  "Please reconsider... ü•π",
  "I'll be so sad... üò≠",
  "Give me a chance! üôè",
  "My heart can't take this... üòø",
  "Pretty please?? üåπ",
  "I promise to be good! ü§û",
  "You know you want to tap Yes! üòè",
  "Just tap Yes already! üíù",
  "The No button is tired of running! üòÆ‚Äçüí®",
  "OK fine... just kidding, TAP YES! ü´∂",
];

// Position the No button initially below the Yes button
function initNoPosition() {
  const yesRect = btnYes.getBoundingClientRect();
  btnNo.style.top = (yesRect.bottom + 20) + 'px';
}

// Wait for layout
setTimeout(initNoPosition, 100);

function getRandomPosition() {
  const safeMargin = 15;
  const btnW = btnNo.offsetWidth;
  const btnH = btnNo.offsetHeight;
  const maxX = window.innerWidth - btnW - safeMargin;
  const maxY = window.innerHeight - btnH - safeMargin;
  const x = safeMargin + Math.random() * Math.max(0, maxX - safeMargin);
  const y = safeMargin + Math.random() * Math.max(0, maxY - safeMargin);
  return { x, y };
}

function escapeNo() {
  noAttempts++;
  const pos = getRandomPosition();

  btnNo.style.left = pos.x + 'px';
  btnNo.style.top = pos.y + 'px';
  btnNo.style.transform = 'none';
  btnNo.style.transition = 'left 0.15s ease, top 0.15s ease, font-size 0.2s ease, padding 0.2s ease, opacity 0.2s ease';

  // Shrink No button text + padding, grow Yes button
  const shrinkFont = Math.max(0.7, 1 - noAttempts * 0.04);
  const growScale = Math.min(1.6, 1 + noAttempts * 0.07);
  btnNo.style.fontSize = `calc(clamp(1rem, 3.5vw, 1.2rem) * ${shrinkFont})`;
  btnNo.style.opacity = Math.max(0.4, 1 - noAttempts * 0.04);

  btnYes.style.transform = `scale(${growScale})`;
  btnYes.style.boxShadow = `0 6px ${25 + noAttempts * 5}px rgba(255, 45, 85, ${Math.min(0.85, 0.5 + noAttempts * 0.03)})`;

  // Show funny messages
  const msgIdx = Math.min(noAttempts - 1, noMessages.length - 1);
  noMsg.textContent = noMessages[msgIdx];
  noMsg.style.opacity = '1';
}

// === Mobile: escape on TOUCH (tap) ===
btnNo.addEventListener('touchstart', function(e) {
  e.preventDefault();
  e.stopPropagation();
  escapeNo();
}, { passive: false });

// === Desktop: escape on hover AND click ===
btnNo.addEventListener('mouseenter', escapeNo);
btnNo.addEventListener('click', function(e) {
  e.preventDefault();
  escapeNo();
});

// ============ YES BUTTON ‚Äî CELEBRATION ============
function showCelebration() {
  document.getElementById('questionScreen').style.display = 'none';
  document.getElementById('bgHearts').style.display = 'none';
  btnNo.style.display = 'none';
  const celeb = document.getElementById('celebScreen');
  celeb.classList.add('active');
  startHeartAnimation();
  launchConfetti();
}

btnYes.addEventListener('click', showCelebration);
btnYes.addEventListener('touchend', function(e) {
  e.preventDefault();
  showCelebration();
});

// ============ CONFETTI ============
function launchConfetti() {
  const container = document.getElementById('confettiContainer');
  const colors = ['#ff4d6d','#ff85a1','#fbb1bd','#fff0f3','#ff2a52','#ff6b8a','#ffd6e0','#c9184a','#ffccd5','#ff0a54'];
  const shapes = ['‚ù§','üíñ','üíó','üíï','‚ú®','üåπ','üíù','‚ô•'];
  const count = isMobile ? 60 : 100;

  for (let i = 0; i < count; i++) {
    setTimeout(() => {
      const piece = document.createElement('div');
      piece.className = 'confetti-piece';
      if (Math.random() > 0.4) {
        piece.textContent = shapes[Math.floor(Math.random() * shapes.length)];
        piece.style.fontSize = (14 + Math.random() * 18) + 'px';
      } else {
        piece.style.width = (8 + Math.random() * 8) + 'px';
        piece.style.height = (8 + Math.random() * 8) + 'px';
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];
        piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
      }
      piece.style.left = Math.random() * 100 + '%';
      piece.style.animationDuration = (2 + Math.random() * 3) + 's';
      piece.style.animationDelay = (Math.random() * 0.5) + 's';
      container.appendChild(piece);
      setTimeout(() => piece.remove(), 6000);
    }, i * 35);
  }

  // Second wave
  setTimeout(() => {
    for (let i = 0; i < 40; i++) {
      setTimeout(() => {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.textContent = shapes[Math.floor(Math.random() * shapes.length)];
        piece.style.fontSize = (16 + Math.random() * 16) + 'px';
        piece.style.left = Math.random() * 100 + '%';
        piece.style.animationDuration = (2.5 + Math.random() * 3) + 's';
        container.appendChild(piece);
        setTimeout(() => piece.remove(), 6000);
      }, i * 50);
    }
  }, 3000);
}

// ============ HEART PARTICLE CANVAS (celebration) ============
function startHeartAnimation() {
  const canvas = document.getElementById('heartCanvas');
  const ctx = canvas.getContext('2d');
  let W, H;

  function resize() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  function heartX(t) { return 16 * Math.pow(Math.sin(t), 3); }
  function heartY(t) { return -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t)); }

  // Fewer particles on mobile for smooth performance
  const outlineCount = isMobile ? 500 : 1000;
  const innerCount = isMobile ? 300 : 600;
  // Slightly smaller heart on mobile
  const baseMultiplier = isMobile ? 0.7 : 1;

  class Particle {
    constructor(inner) {
      this.angle = Math.random() * Math.PI * 2;
      this.baseScale = (inner ? (Math.random() * 0.85) * 9 : 8 + Math.random() * 2.5) * baseMultiplier;
      this.offsetX = (Math.random()-0.5) * 3;
      this.offsetY = (Math.random()-0.5) * 3;
      this.size = inner ? 0.8 + Math.random()*1 : 1 + Math.random()*1.8;
      this.brightness = inner ? 0.4 + Math.random()*0.4 : 0.5 + Math.random()*0.5;
      this.pulseOffset = Math.random() * Math.PI * 2;
      this.pulseSpeed = 0.5 + Math.random() * 1.5;
    }
    getPos(beat) {
      const s = this.baseScale * (1 + beat * 0.18);
      return { x: W/2 + heartX(this.angle)*s + this.offsetX, y: H/2 + heartY(this.angle)*s + this.offsetY - 30 };
    }
    draw(beat, t) {
      const p = this.getPos(beat);
      const pulse = 0.6 + 0.4 * Math.sin(t * this.pulseSpeed + this.pulseOffset);
      const alpha = this.brightness * pulse * (0.7 + beat*0.3);
      const glow = this.size * (1 + beat*0.5);
      ctx.beginPath();
      ctx.arc(p.x, p.y, glow, 0, Math.PI*2);
      ctx.fillStyle = `rgba(255, 40, 70, ${alpha})`;
      ctx.fill();
      ctx.beginPath();
      ctx.arc(p.x, p.y, glow*0.35, 0, Math.PI*2);
      ctx.fillStyle = `rgba(255, ${150+beat*80|0}, ${170+beat*60|0}, ${alpha*0.8})`;
      ctx.fill();
    }
  }

  const particles = [];
  for (let i = 0; i < outlineCount; i++) particles.push(new Particle(false));
  for (let i = 0; i < innerCount; i++) particles.push(new Particle(true));

  class Sparkle {
    constructor() { this.reset(); }
    reset() {
      this.angle = Math.random() * Math.PI * 2;
      const s = (8 + Math.random()*3) * baseMultiplier;
      this.x = W/2 + heartX(this.angle)*s + (Math.random()-0.5)*20;
      this.y = H/2 + heartY(this.angle)*s + (Math.random()-0.5)*20 - 30;
      this.vx = (Math.random()-0.5)*2;
      this.vy = -1-Math.random()*2;
      this.life = 1;
      this.decay = 0.005 + Math.random()*0.015;
      this.size = 1 + Math.random()*3;
    }
    update() {
      this.x += this.vx; this.y += this.vy; this.life -= this.decay;
      if (this.life <= 0) this.reset();
    }
    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size*this.life, 0, Math.PI*2);
      ctx.fillStyle = `rgba(255, 180, 200, ${this.life*0.8})`;
      ctx.fill();
    }
  }

  const sparkleCount = isMobile ? 40 : 80;
  const sparkles = [];
  for (let i = 0; i < sparkleCount; i++) sparkles.push(new Sparkle());

  let time = 0;
  function animate() {
    time += 0.03;
    const cyc = time % (Math.PI*2);
    let beat = 0;
    if (cyc < 0.8) beat = Math.sin(cyc/0.8*Math.PI);
    else if (cyc > 1.2 && cyc < 1.8) beat = Math.sin((cyc-1.2)/0.6*Math.PI)*0.6;
    beat = Math.max(0, beat);

    ctx.fillStyle = 'rgba(10,10,10,0.15)';
    ctx.fillRect(0,0,W,H);

    const grad = ctx.createRadialGradient(W/2,H/2-30,0,W/2,H/2-30,200);
    grad.addColorStop(0, `rgba(255,40,70,${0.08+beat*0.06})`);
    grad.addColorStop(1, 'rgba(10,10,10,0)');
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,W,H);

    for (const p of particles) p.draw(beat, time);
    for (const s of sparkles) { s.update(); s.draw(); }

    requestAnimationFrame(animate);
  }
  animate();
}
</script>
</body>
</html>
