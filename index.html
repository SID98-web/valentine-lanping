<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>‚ù§Ô∏è</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  html, body {
    width: 100%;
    height: 100dvh;
    overflow: hidden;
    touch-action: manipulation;
  }

  body {
    background: #0d0000;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Quicksand', sans-serif;
  }

  /* ============ QUESTION SCREEN ============ */
  .question-screen {
    z-index: 10;
    text-align: center;
    padding: 0 28px;
    width: 100%;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: fadeIn 1s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .bear-container {
    width: 200px;
    height: 200px;
    margin-bottom: 24px;
  }
  .bear-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .question-line {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2.4rem, 8.5vw, 3.2rem);
    color: #fff;
    text-shadow: 0 0 20px rgba(255, 60, 90, 0.5);
    line-height: 1.15;
  }

  .question-name {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.5rem, 5.5vw, 2rem);
    color: #ff6b8a;
    text-shadow: 0 0 15px rgba(255, 107, 138, 0.4);
    margin-top: 6px;
    margin-bottom: 32px;
  }

  .btn-yes {
    padding: 18px 56px;
    font-size: clamp(1.2rem, 4.5vw, 1.5rem);
    font-family: 'Quicksand', sans-serif;
    font-weight: 700;
    border: none;
    border-radius: 50px;
    background: linear-gradient(135deg, #ff4d6d, #ff2a52);
    color: white;
    box-shadow: 0 4px 25px rgba(255, 45, 85, 0.5);
    transition: all 0.3s ease;
    z-index: 20;
    -webkit-appearance: none;
    min-width: 200px;
    cursor: pointer;
  }
  .btn-yes:active {
    transform: scale(1.06);
    box-shadow: 0 6px 35px rgba(255, 45, 85, 0.7);
  }

  .btn-no {
    margin-top: 14px;
    padding: 13px 36px;
    font-size: clamp(0.95rem, 3.5vw, 1.1rem);
    font-family: 'Quicksand', sans-serif;
    font-weight: 600;
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 50px;
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.55);
    transition: all 0.2s ease;
    z-index: 20;
    user-select: none;
    -webkit-appearance: none;
    cursor: pointer;
  }
  .btn-no.escaped {
    position: fixed;
    margin-top: 0;
  }

  .no-msg {
    color: rgba(255, 150, 170, 0.9);
    font-size: clamp(0.85rem, 3vw, 1rem);
    margin-top: 18px;
    min-height: 22px;
  }

  /* ============ CELEBRATION SCREEN ============ */
  .celeb-screen {
    position: fixed;
    inset: 0;
    z-index: 100;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: #0a0a0a;
  }
  .celeb-screen.active { display: flex; animation: fadeIn 0.5s ease-out; }
  .celeb-screen canvas { position: fixed; inset: 0; z-index: 1; }

  .celeb-content {
    position: relative;
    z-index: 10;
    text-align: center;
    pointer-events: none;
    padding: 20px;
  }
  .celeb-emoji { font-size: clamp(3rem, 10vw, 4.5rem); margin-bottom: 10px; animation: pop 0.6s ease-out 0.5s both; }
  .celeb-title { font-family: 'Dancing Script', cursive; font-size: clamp(2.5rem, 9vw, 4rem); color: #fff; text-shadow: 0 0 30px rgba(255,60,90,0.8); animation: pop 0.6s ease-out 0.8s both; }
  .celeb-sub { font-size: clamp(1rem, 3.5vw, 1.3rem); color: rgba(255,180,200,0.9); margin-top: 12px; letter-spacing: 4px; text-transform: uppercase; animation: pop 0.6s ease-out 1.1s both; }
  .celeb-name { font-family: 'Dancing Script', cursive; font-size: clamp(2rem, 7vw, 2.8rem); color: #ff6b8a; margin-top: 8px; text-shadow: 0 0 20px rgba(255,107,138,0.6); animation: pop 0.6s ease-out 1.4s both; }
  @keyframes pop {
    0%   { opacity: 0; transform: scale(0.3) translateY(20px); }
    50%  { opacity: 1; transform: scale(1.05); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
  }

  .confetti-box { position: fixed; inset: 0; pointer-events: none; z-index: 50; overflow: hidden; }
  .confetti-piece { position: absolute; top: -20px; animation: fall linear forwards; }
  @keyframes fall {
    0%   { opacity: 1; transform: translateY(0) rotate(0deg); }
    100% { opacity: 0; transform: translateY(105vh) rotate(720deg) scale(0.5); }
  }
</style>
</head>
<body>

<div class="question-screen" id="qScreen">
  <div class="bear-container">
    <img src="https://media.tenor.com/bfWMVoNsii4AAAAM/cute-love.gif"
      onerror="this.onerror=function(){this.style.display='none';this.nextElementSibling.style.display='block';};this.src='https://media.tenor.com/LSGnPLBnoxYAAAAM/bear-love.gif';"
      alt="üß∏">
    <div style="display:none;font-size:120px;line-height:200px;text-align:center;">üß∏üíï</div>
  </div>

  <div class="question-line">Will you be my</div>
  <div class="question-line">Valentine?</div>
  <div class="question-name">‚Äî Lanping ‚Äî</div>

  <button class="btn-yes" id="btnYes">Yes! ‚ù§Ô∏è</button>
  <button class="btn-no" id="btnNo">No üòÖ</button>

  <div class="no-msg" id="noMsg"></div>
</div>

<div class="celeb-screen" id="celebScreen">
  <canvas id="heartCanvas"></canvas>
  <div class="confetti-box" id="confettiBox"></div>
  <div class="celeb-content">
    <div class="celeb-emoji">ü•∞</div>
    <div class="celeb-title">Yayyy!</div>
    <div class="celeb-sub">Happy Valentine's Day</div>
    <div class="celeb-name">Lanping ‚ù§Ô∏è</div>
  </div>
</div>

<script>
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
const btnNo = document.getElementById('btnNo');
const btnYes = document.getElementById('btnYes');
const noMsg = document.getElementById('noMsg');

let noAttempts = 0;
const msgs = [
  "Are you sure? ü•∫",
  "Really?? Think again... üò¢",
  "You're breaking my heart! üíî",
  "Please reconsider... ü•π",
  "I'll be so sad... üò≠",
  "Give me a chance! üôè",
  "My heart can't take this... üòø",
  "Pretty please?? üåπ",
  "I promise to be good! ü§û",
  "You know you want to tap Yes! üòè",
  "Just tap Yes already! üíù",
  "The No button is tired of running! üòÆ‚Äçüí®",
  "OK fine... just kidding, TAP YES! ü´∂",
];

function escapeNo() {
  noAttempts++;
  btnNo.classList.add('escaped');

  const m = 20, w = btnNo.offsetWidth, h = btnNo.offsetHeight;
  const x = m + Math.random() * Math.max(0, window.innerWidth - w - m * 2);
  const y = m + Math.random() * Math.max(0, window.innerHeight - h - m * 2);
  btnNo.style.left = x + 'px';
  btnNo.style.top = y + 'px';
  btnNo.style.transition = 'left 0.15s ease, top 0.15s ease, opacity 0.2s ease';

  const shrink = Math.max(0.6, 1 - noAttempts * 0.05);
  const grow = Math.min(1.45, 1 + noAttempts * 0.06);
  btnNo.style.fontSize = (shrink * 100) + '%';
  btnNo.style.opacity = Math.max(0.3, 1 - noAttempts * 0.06);

  btnYes.style.transform = 'scale(' + grow + ')';
  btnYes.style.boxShadow = '0 6px ' + (25 + noAttempts * 5) + 'px rgba(255,45,85,' + Math.min(0.85, 0.5 + noAttempts * 0.03) + ')';

  noMsg.textContent = msgs[Math.min(noAttempts - 1, msgs.length - 1)];
}

btnNo.addEventListener('touchstart', function(e) { e.preventDefault(); escapeNo(); }, { passive: false });
btnNo.addEventListener('mouseenter', escapeNo);
btnNo.addEventListener('click', function(e) { e.preventDefault(); escapeNo(); });

// YES
let done = false;
function celebrate() {
  if (done) return;
  done = true;
  document.getElementById('qScreen').style.display = 'none';
  btnNo.style.display = 'none';
  document.getElementById('celebScreen').classList.add('active');
  startHeart();
  startConfetti();
}
btnYes.addEventListener('click', celebrate);
btnYes.addEventListener('touchend', function(e) { e.preventDefault(); celebrate(); });

// CONFETTI
function startConfetti() {
  const box = document.getElementById('confettiBox');
  const shapes = ['‚ù§','üíñ','üíó','üíï','‚ú®','üåπ','üíù','‚ô•'];
  const colors = ['#ff4d6d','#ff85a1','#fbb1bd','#ff2a52','#ff6b8a','#c9184a','#ff0a54'];
  const n = isMobile ? 60 : 100;
  for (let i = 0; i < n; i++) {
    setTimeout(() => {
      const p = document.createElement('div');
      p.className = 'confetti-piece';
      if (Math.random() > 0.4) {
        p.textContent = shapes[Math.floor(Math.random() * shapes.length)];
        p.style.fontSize = (14 + Math.random() * 18) + 'px';
      } else {
        p.style.width = (8 + Math.random() * 8) + 'px';
        p.style.height = p.style.width;
        p.style.background = colors[Math.floor(Math.random() * colors.length)];
        p.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
      }
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (2 + Math.random() * 3) + 's';
      box.appendChild(p);
      setTimeout(() => p.remove(), 6000);
    }, i * 35);
  }
  // wave 2
  setTimeout(() => {
    for (let i = 0; i < 40; i++) {
      setTimeout(() => {
        const p = document.createElement('div');
        p.className = 'confetti-piece';
        p.textContent = shapes[Math.floor(Math.random() * shapes.length)];
        p.style.fontSize = (16 + Math.random() * 16) + 'px';
        p.style.left = Math.random() * 100 + '%';
        p.style.animationDuration = (2.5 + Math.random() * 3) + 's';
        box.appendChild(p);
        setTimeout(() => p.remove(), 6000);
      }, i * 50);
    }
  }, 3000);
}

// HEART CANVAS
function startHeart() {
  const c = document.getElementById('heartCanvas');
  const ctx = c.getContext('2d');
  let W, H;
  function resize() { W = c.width = window.innerWidth; H = c.height = window.innerHeight; }
  resize();
  window.addEventListener('resize', resize);

  const hx = t => 16 * Math.pow(Math.sin(t), 3);
  const hy = t => -(13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t));
  const sc = isMobile ? 0.6 : 1;
  const oN = isMobile ? 450 : 1000;
  const iN = isMobile ? 250 : 600;

  class P {
    constructor(inner) {
      this.a = Math.random() * Math.PI * 2;
      this.s = (inner ? Math.random() * 0.85 * 9 : 8 + Math.random() * 2.5) * sc;
      this.ox = (Math.random()-0.5)*3; this.oy = (Math.random()-0.5)*3;
      this.sz = inner ? 0.8+Math.random() : 1+Math.random()*1.8;
      this.br = inner ? 0.4+Math.random()*0.4 : 0.5+Math.random()*0.5;
      this.po = Math.random()*Math.PI*2; this.ps = 0.5+Math.random()*1.5;
    }
    draw(beat, t) {
      const ss = this.s*(1+beat*0.18);
      const x = W/2+hx(this.a)*ss+this.ox, y = H/2+hy(this.a)*ss+this.oy-30;
      const pulse = 0.6+0.4*Math.sin(t*this.ps+this.po);
      const al = this.br*pulse*(0.7+beat*0.3);
      const g = this.sz*(1+beat*0.5);
      ctx.beginPath(); ctx.arc(x,y,g,0,Math.PI*2);
      ctx.fillStyle = 'rgba(255,40,70,'+al+')'; ctx.fill();
      ctx.beginPath(); ctx.arc(x,y,g*0.35,0,Math.PI*2);
      ctx.fillStyle = 'rgba(255,'+(150+beat*80|0)+','+(170+beat*60|0)+','+al*0.8+')'; ctx.fill();
    }
  }
  const ps = [];
  for (let i=0;i<oN;i++) ps.push(new P(false));
  for (let i=0;i<iN;i++) ps.push(new P(true));

  class S {
    constructor(){this.reset();}
    reset(){
      this.a=Math.random()*Math.PI*2;
      const ss=(8+Math.random()*3)*sc;
      this.x=W/2+hx(this.a)*ss+(Math.random()-0.5)*20;
      this.y=H/2+hy(this.a)*ss+(Math.random()-0.5)*20-30;
      this.vx=(Math.random()-0.5)*2;this.vy=-1-Math.random()*2;
      this.l=1;this.d=0.005+Math.random()*0.015;this.sz=1+Math.random()*3;
    }
    update(){this.x+=this.vx;this.y+=this.vy;this.l-=this.d;if(this.l<=0)this.reset();}
    draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.sz*this.l,0,Math.PI*2);ctx.fillStyle='rgba(255,180,200,'+this.l*0.8+')';ctx.fill();}
  }
  const sps=[]; for(let i=0;i<(isMobile?35:80);i++) sps.push(new S());

  let t=0;
  (function loop(){
    t+=0.03;
    const cyc=t%(Math.PI*2);
    let beat=0;
    if(cyc<0.8) beat=Math.sin(cyc/0.8*Math.PI);
    else if(cyc>1.2&&cyc<1.8) beat=Math.sin((cyc-1.2)/0.6*Math.PI)*0.6;
    beat=Math.max(0,beat);
    ctx.fillStyle='rgba(10,10,10,0.15)';ctx.fillRect(0,0,W,H);
    const gr=ctx.createRadialGradient(W/2,H/2-30,0,W/2,H/2-30,200);
    gr.addColorStop(0,'rgba(255,40,70,'+(0.08+beat*0.06)+')');
    gr.addColorStop(1,'rgba(10,10,10,0)');
    ctx.fillStyle=gr;ctx.fillRect(0,0,W,H);
    for(const p of ps) p.draw(beat,t);
    for(const s of sps){s.update();s.draw();}
    requestAnimationFrame(loop);
  })();
}
</script>
</body>
</html>
